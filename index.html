<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP8266 Firebase Data</title>
    
    <style>
        body { font-family: sans-serif; text-align: center; padding: 50px; }
        .box { border: 2px solid #ddd; padding: 20px; border-radius: 10px; display: inline-block; }
        h1 { color: #333; }
        #data-value { color: #e74c3c; font-size: 40px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="box">
        <h2>ค่าจาก Firebase</h2>
        <div id="data-value">กำลังโหลด...</div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <script>
        // 3. การตั้งค่า Firebase (จากรูปภาพของคุณ)
        const firebaseConfig = {
            apiKey: "AIzaSyCiJlcTKJqo02N5t12Tcf1iaW-vkWdCvaM",
            authDomain: "project01-21d95.firebaseapp.com",
            databaseURL: "https://project01-21d95-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "project01-21d95"
        };

        // เริ่มต้นการทำงาน Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // =======================================================
        // 4. จุดสำคัญ! แก้ไขชื่อ Node ให้ตรงกับ Database ของคุณ
        // =======================================================
        
        // สมมติว่าใน Database คุณเก็บค่าไว้ในชื่อ "test" 
        // (ถ้าชื่ออื่น เช่น "sensor1" หรือ "temp" ให้แก้คำว่า 'test' ด้านล่างนี้ครับ)
        var pathRef = db.ref('temperature'); 

        // คำสั่งดึงข้อมูลแบบ Realtime
        pathRef.on('value', (snapshot) => {
            const data = snapshot.val();
            console.log("Data received:", data); // ดูค่าใน Console (F12)

            // เช็คว่ามีข้อมูลไหม ถ้ามีให้แสดงผล
            if (data !== null) {
                document.getElementById("data-value").innerText = data;
            } else {
                document.getElementById("data-value").innerText = "ไม่พบข้อมูล (เช็คชื่อ Node)";
            }
        }, (error) => {
            console.error("Error:", error);
            document.getElementById("data-value").innerText = "Error: ดู Console";
        });

    </script>
</body>
</html>
